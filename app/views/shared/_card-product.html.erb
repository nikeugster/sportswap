<div class="card-whole-link">
  <%= link_to offer_path(offer.id) do %>
    <div class="container pl-5">
      <div class="card-product col-12 p-3 mb-3">
      <% if offer.photos.attached? %>
        <%= cl_image_tag offer.photos[0].key, id: "card-product-img" %>
      <% end %>
        <div class="card-product-rightside">
          <div class="card-product-infos pl-3">
            <div class="card-title-location">
              <h2><%= offer.title %></h2>
              <h2><i class="fas fa-dollar-sign"></i> <%= offer.compensation_value %></h2>
            </div>
            <div class="card-title-info">
              <div class="card-category-condition">
                <p class="card-tag"><%= offer.category %></p>
                <p class="card-tag"><%= offer.condition %></p>
              </div>
              <p class="card-tag-invisible"><%#= offer.location %></p>
            </div>
            <div class="card-description">
                <p><%= offer.description[0..100] %>...</p>
            </div>
            <div class="profile pt-2">
              <%= cl_image_tag offer.user.photo.key, class: "avatar" %>
              <div class="d-flex flex-column justify-content-space-around">
                <div class="card-avatar-info pt-2">
                  <p><%= offer.user.first_name %></p>
                </div>
                <div class="rating pb-2">
                  <% if offer.user.reviews.any? %>
                    <% average = offer.user.reviews.map { |review| review.rating }.sum / offer.user.reviews.length %>
                    <% average.times do %>
                     <i class="fas fa-star"></i>
                    <% end %>
                    <% (5 - average).times do  %>
                     <i class="far fa-star"></i>
                    <% end %>
                  <% else %>
                    <p>no reviews yet</p>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
