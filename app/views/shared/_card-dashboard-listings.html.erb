<div class="card-whole-link">
  <%= link_to offer_path(offer.id) do %>
    <div class="card-product col-12 p-3 mb-3">
    <% if offer.photos.attached? %>
      <%= cl_image_tag offer.photos[0].key, id: "card-product-img" %>
    <% end %>
      <div class="card-product-rightside">
        <div class="product-infos pl-3">
          <div class="card-title-location">
            <h2><%= offer.title %></h2>
            <h2><i class="fas fa-dollar-sign"></i> <%= offer.compensation_value %></h2>
          </div>
          <div class="card-title-info">
            <div class="card-category-condition">
              <p class="card-tag"><%= offer.category %></p>
              <p class="card-tag"><%= offer.condition %></p>
            </div>
          </div>
          <% if offer.bookings.present? %>
            <h2 class="mt-3">Open booking requests:</h2>
          <% else %>
            <h2 class="mt-3">No booking requests.</h2>
          <% end %>
          <% current_user.bookings_as_owner.each do |booking| %>
            <% if booking.offer_id == offer.id && booking.status == "pending" %>
              <div class="card-dashboard-open-bookings">
                <div class="card-dashboard-booking-details-text">
                  <p><%= booking.user.first_name %> <%= booking.user.last_name %> wants to rent <%= offer.title %></p>
                  <p>from: <%= booking.starts_at %> to: <%= booking.ends_at %></p>
                </div>
                <div class="card-dashboard-booking-details-buttons">
                  <%= link_to booking_path(booking, "declined"), method: :patch, remote: true do %>
                    <i class="far fa-times-circle dashboard-declined-text"></i>
                  <% end %>
                  <%= link_to booking_path(booking, "accepted"), method: :patch, remote: true do %>
                    <i class="far fa-check-circle dashboard-accepted-text"></i>
                  <% end %>
                </div>
              </div>
            <% elsif booking.offer_id == offer.id && booking.status == "accepted" %>
              <p class="dashboard-accepted-text"><i class="fas fa-check"></i> You have accepted <%= booking.user.first_name %>'s booking request from: <%= booking.starts_at %> to: <%= booking.ends_at %></p>
            <% elsif booking.offer_id == offer.id && booking.status == "declined" %>
              <p class="dashboard-declined-text"><i class="fas fa-times"></i></i> You have declined <%= booking.user.first_name %>'s booking request from: <%= booking.starts_at %> to: <%= booking.ends_at %></p>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
